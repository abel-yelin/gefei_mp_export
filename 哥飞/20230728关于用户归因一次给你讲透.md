![cover_image](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LBrX00GQeicv4mcR6L00FEyTdzyf2BsibfdYXnKRvPO4O2RKwIrbElASYI1R7icPjLljIECBMp8xpccYqkQE6enjA/0?wx_fmt=jpeg)

#  关于用户归因，一次给你讲透

原创  我是哥飞  [ 哥飞 ](javascript:void\(0\);)

__ _ _ _ _

![](https://mmbiz.qpic.cn/sz_mmbiz_png/LBrX00GQeicv4mcR6L00FEyTdzyf2BsibfC5KLrQtVOtbNllK3zibqnYL7dXLLbJScyica6BZdsaMunfdPvfZLdT2w/640?wx_fmt=png)

先说一下，本来今天的推文是要分享另外一个主题的，但是文章写到一半，我觉得不合适公开传播，所以临时改成这个主题了。  

主要原因是，那个主题的核心方法不是哥飞原创的，我也是听别的大佬讲的方法，这种方法适合小范围分享，不适合公开分享。不是不合规，而是很有用，太有用了，大佬自己还在用，我就无法公开分享出来。  

如果想知道具体是什么方法，可以加哥飞运营的付费社群“哥飞的朋友们”，入群后给你讲解。

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/LBrX00GQeicv4mcR6L00FEyTdzyf2BsibfmuzhLjwzxketx2X4pcVbz6rIZSt5eNwRve759cJZ7KWgiavicWekMonA/640?wx_fmt=jpeg)

回到本文主题，归因。

先说用途，归因一定是配合推广来使用的，免费推广付费推广都有用。

我们需要知道每一个用户来自于哪个渠道，进而就可以统计出每一个渠道的推广效果。

并且给用户打标签之后，还可以知道每一个渠道带来的用户质量到底怎么样。

每一个产品，都能够整理出一些关键指标，如用户留存、付费、参与互动、生产内容、消费内容等。

不同类型的产品，关注的指标不同。

这里假设我们的产品是一个付费工具，那么我们就可以整理出注册率、付费率、留存率（次日、七日、月等）、每个注册用户平均付费金额、每个付费用户平均付费金额等指标。

如果我们对用户进行了精准归因，不管是付费推广还是免费推广，我们都能够计算每一个渠道的这些指标。

这样就能够知道哪些渠道更适合我们的产品，我们就去着重推广。

如果是付费推广，还可以根据每一天花  费  的广告费，计算每一个渠道每天的注册成本、付费用户成本、ROI等指标。

同样能够根据这些指标，知道每个渠道的好坏。

那么到底要怎么归因呢？

web端和App端方法不一样，我们一一来说。

* * *

** web端归因  **

先说 web 端，有多种方式，  最简单的就是链接里加参数。

大家可能经常见到 utm_ 开头的参数，其实就是用来记录用户来源的。

用不同的统计系统有不同的参数，utm 是谷歌统计用的参数。

我们也可以自己实现简单的  统计  系统，  如果只需要记录渠道来源，那么直接一个 channel 参数就可以。

假设你在 v2ex 发的链接，就可以 https://youdomain.com/?channel=v2ex 这种形式 。

但如果我们在 v2ex 的不同位置投了不同的广告，甚至用了不同的图片素材，不同的文案等，我们就可以多加一些参数到链接里。

用户点击链接，进入到我们的广告落地页，我们需要记录每一次的落地页访问日志，因为落地页打开次数也算一个指标。

我们还可以配合ip和cookie来识别一个人打开多次落地页的情况。

用户从落地页点击注册按钮，注册进来了，我们就需要给用户打上标签。

就可以是刚才链接里的每一个参数都当做数据库里用户标签表的一个字段。

举例，链接里有 channel、position、img、title 四个参数，分别表示渠道、广告位、广告图片素材、广告文案标题。

那么我们最简单的用户标签表可以是：

  *   *   *   *   *   *   *   *   * 

    
    
    user_tag 用户标签表id 自增iduser_id 用户idreg_time 注册时间reg_ip 注册时ipchannel 渠道position 广告位ad_img 广告素材图片ad_title 广告文案

每个用户注册进来，都在这张表记录一条记录。

然后再搞一张用户行为表：  

  *   *   *   *   *   *   * 

    
    
    user_action 用户行为表id 自增iduser_id 用户idaction_time 行为时间action_type 行为类型action_name 行为名称action_value 行为值（如付费这里可以填付费金额）

这里的行为类型可以是  注册、  付费、  生产内容、  分享、  点赞、评论  等等各种我们觉得对我们的产品有用的行为。

之后我们就可以连表查询，用group等sql子句，对每个渠道的每个行为进行分组统计。

如果是付费推广，最好还需要一张广告费用表：

  *   *   *   *   *   * 

    
    
    ad_cost 广告费用表id 自增idad_date 广告日期channel 广告渠道position 广告位置cost_money 广告花费金额

这样就可以计算每个渠道，每天，每个广告位的花费，注册成本、付费成本等各项关键指标的成本。

大家就会发现 web 端的归因挺方便的，只需要链接参数准确，就可以正确归因。

但是 App 端就没那么简单了。

* * *

  

** App端归因  **

用户在下载安装我们App时，就离开了广告渠道的环境了，没办法在注册时通过url获取参数。

那样怎么办呢？

那就要看广告平台会不会向我们发送每个查看了我们广告的用户信息。

以字节跳动的巨量引擎为例，我们创建广告时，就可以填入一个点击回传接口地址进去。

当用户在抖音刷到我们的广告时，抖音App会记录用户的这一次浏览广告行为，并回传到巨量引擎后台。

巨量引擎就会识别到这次广告是我们投的，并且填写了点击回传接口，那么就会把用户的这一次点击数据传过来。

一般包含时间、广告位、广告素材、用户手机网络IP、用户手机设备号、UserAgent等信息。

其中手机设备号，不同系统包含的信息也不同。如Android一般会包含 oaid 、mac地址、Androidid 等信息。以前还会有 imei
传过来，后来因为隐私原因不能传了。  如果是 iOS ，则会传 idfa 、idfv 等信息。

还有一个 caid，不建议小公司接入，本文不展开，大家可以自行搜索了解。  

那我们自己的App，也需要在用户安装后首次启动时，把这些跟用户相关的信息记录下来，一起传给后端。

一般首次启动传过来的，我们就当做激活事件。

激活后就是注册事件。

注册后就是其它常规的产品内一些关键行为事件。

把广告平台传过来的点击信息与我们App收集的设备信息进行匹配，就能对用户进行归因。

优先匹配设备号等几乎不会变的信息，有时候可能无法获取设备号，就可以继续看ip、ua、点击时间、激活时间等信息，尽可能把用户归因上。

按照我们我们之前游戏  归  因  的经验，安卓有90%以上准确归因率。iOS也能到85%左右。

上面讲的这种方法依赖于广告平台传点击数据过来。

如果广告平台不传怎么办呢？

那就只能加一个中间页，通过网页参数记录渠道信息，把这个信息与我们App记录的设备信息相匹配。

以上方法，基本可以覆盖国内大大小小各种广告平台。

但国外的大平台，如谷歌、facebook、twitter等，不会直接向我们发送广告点击数据。而且用户点击后直接跳转到 Appstore 或者 Google
Play 下载，不给我们用中间页记录信息的机会。

我们就几乎无法自己归因了。

国外就要买归因服务，如 appsflyer 等，一般按照归因的设备数量收费，每个设备几毛钱到一块多都可能。相当于被垄断了，fb
后台不能填我们的点击回传接口，但可以选择使用 appsflyer 的。

好了，通过今天的文章，你应该对归因有了一个初步的认知了，但实际上真正要做好归因，细节很多，每个平台的归因率都可以根据平台特色去细细打磨。

如果对归因感兴趣，或者有什么细节想与哥飞交流，可以加哥飞微信 qiayue 了解。  

![](https://mmbiz.qpic.cn/sz_mmbiz_png/LBrX00GQeictmH6ZbzrmhFdgH55yNiarBAXwFK5njpE3j8ehd8M5CNnh5mX01ibDAls4gZvob7nUmwXnscEXNDm3g/640?wx_fmt=png)

  

预览时标签不可点

微信扫一扫  
关注该公众号





****



****



  收藏

